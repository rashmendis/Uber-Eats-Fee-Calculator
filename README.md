
<!-- This application was initially generated by AI and may require further refinement. -->

# Uber Eats Fee Calculator - Built with Gemini AI (via Firebase Studio)

This is a simple Next.js application designed to calculate Uber Eats prices, factoring in a configurable fee percentage and an optional offer/discount percentage. It allows users to calculate the final selling price needed based on a desired item price or determine the original item price by subtracting the fee and considering the discount from a given selling price.

## Features

*   **Calculate Selling Price (Based on Desired Payout + Fee + Optional Offer):** Enter the **Desired Payout** you want to receive *after* the fee is deducted. The calculator determines the required **Selling Price (Before Discount)** using `Selling Price = Desired Payout / (1 - Fee Percentage)`. Optionally, select an **Offer Percentage** (0%, 20%, 30%, 40%, 50%, 75%, or Custom). It calculates the **Final Price (Customer Pays)** as `Selling Price (Before Discount) * (1 - Offer Percentage)`. It also shows the calculated **Uber Fee** (`Selling Price (Before Discount) * Fee Percentage`), the **Discount Amount**, and the **Actual Payout** (which matches the input Desired Payout).
*   **Calculate Payout (Selling Price - Offer - Fee):** Enter a **Selling Price (Before Discount)** (the price listed on the platform *before* any offer/discount). Optionally, select the **Offer Percentage** (0-100) offered to the customer. The calculator first calculates the **Discount Given** (`Selling Price (Before Discount) * Offer Percentage`) and the **Final Price (Customer Pays)** (`Selling Price (Before Discount) * (1 - Offer Percentage)`). Then, it calculates the **Uber Fee** based on the *Final Price (Customer Pays)* (`Final Price * Fee Percentage`). Finally, it determines the **Payout (Seller Receives)** (`Final Price - Uber Fee`).
*   **Configurable Settings:**
    *   Set the fee percentage (defaults to 30%).
    *   Set the currency symbol (defaults to 'Rs.').
*   **Calculation History:** View a history of your past calculations in an expandable section.
*   **Client-Side Storage:** Settings and history are stored locally in your browser's `localStorage`.
*   **Responsive Design:** Adapts to different screen sizes.

## Live Preview

You can try a live preview of the application here: [Live Preview](https://9000-idx-studio-1746447866480.cluster-fdkw7vjj7bgguspe3fbbc25tra.cloudworkstations.dev)

*(Note: This link might be temporary depending on the hosting environment.)*

## Architecture

This application is built entirely on the **client-side** using Next.js (App Router) and React.

*   **Frontend Framework:** [Next.js](https://nextjs.org/) (with TypeScript)
*   **UI Components:** [shadcn/ui](https://ui.shadcn.com/) built on Radix UI and Tailwind CSS.
*   **Styling:** [Tailwind CSS](https://tailwindcss.com/)
*   **State Management:** React Hooks (`useState`, `useEffect`, `useMemo`, `useCallback`).
*   **Data Storage:** Browser `localStorage` is used to persist user settings and calculation history. **There is no backend server.**

## Getting Started

### Prerequisites

*   [Node.js](https://nodejs.org/) (version 20 or later recommended)
*   [npm](https://www.npmjs.com/) (usually comes with Node.js)

### Installation

1.  Clone the repository:
    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```
2.  Install dependencies:
    ```bash
    npm install
    ```

### Running the Development Server

To run the app in development mode:

```bash
npm run dev
```

This will start the development server, usually on `http://localhost:9002`. The app will automatically reload if you make changes to the code.

## Usage

1.  **Open the App:** Navigate to the running application in your browser.
2.  **Calculator:**
    *   **Selling Price Calculator Tab:**
        *   Enter the **Desired Payout** (the amount you want to receive *after* fees).
        *   (Optional) Select an **Offer Percentage** from the dropdown (0%, 20%, 30%, 40%, 50%, 75%) or choose "Custom" and enter a percentage (0-100).
        *   Click **Calculate Selling Price**.
        *   The calculator shows:
            *   **Selling Price (Before Discount):** The price needed before the offer (`Desired Payout / (1 - Fee Percentage)`).
            *   **Uber Fee:** Calculated on the Selling Price Before Discount.
            *   **Discount Amount:** The value of the offer applied.
            *   **Actual Payout:** Matches the Desired Payout input.
            *   **Final Price (Customer Pays):** The price after the offer.
        *   *Example (No Offer):* Desired Payout `Rs. 700`, Fee `30%`. Result: Selling Price `Rs. 1000`, Fee `Rs. 300`, Actual Payout `Rs. 700`, Final Price `Rs. 1000`.
        *   *Example (With Offer):* Desired Payout `Rs. 700`, Fee `30%`, Offer `10%`. Result: Selling Price `Rs. 1000`, Fee `Rs. 300`, Discount `Rs. 100`, Actual Payout `Rs. 700`, Final Price `Rs. 900`.
    *   **Payout Calculator Tab:**
        *   Enter the **Selling Price (Before Discount)** (the price listed *before* any offer).
        *   (Optional) Select an **Offer Percentage** from the dropdown (0-100) or choose "Custom" and enter a percentage.
        *   Click **Calculate Payout**.
        *   The calculator shows:
            *   **Final Price (Customer Pays):** `Selling Price (Before Discount) * (1 - Offer Percentage)`.
            *   **Discount Given:** The value of the offer applied.
            *   **Uber Fee:** Calculated based on the *Final Price (Customer Pays)* (`Final Price * Fee Percentage`).
            *   **Payout (Seller Receives):** The amount the seller gets after the offer and fee (`Final Price - Uber Fee`).
        *   *Example (No Offer):* Selling Price Before Discount `Rs. 1000`, Fee `30%`. Result: Customer Pays `Rs. 1000`, Discount `Rs. 0`, Fee `Rs. 300`, Seller Receives `Rs. 700`.
        *   *Example (With Offer):* Selling Price Before Discount `Rs. 1000`, Fee `30%`, Offer `10%`. Result: Customer Pays `Rs. 900`, Discount `Rs. 100`, Fee `Rs. 270` (30% of 900), Seller Receives `Rs. 630` (900 - 270).
3.  **Settings:**
    *   Click the gear icon (⚙️) in the top-right corner to open the Settings modal.
    *   Adjust the "Uber Fee Percentage" and "Currency Symbol".
    *   Click "Save Changes". Settings are saved in `localStorage`.
4.  **History:**
    *   Expand the "View Calculation History" accordion below the calculator.
    *   Your recent calculations will be displayed in a table, including offer details.
    *   Click the "Clear" button within the history section to remove all saved history entries from `localStorage`.

## LocalStorage Details

The application uses the browser's `localStorage` to store data persistently on your machine.

*   **Settings Key:** `uberFeeCalculatorSettings`
    *   **Format:** JSON string representing an object like `{"feePercentage": 0.3, "currencySymbol": "Rs."}`.
*   **History Key:** `uberFeeCalculatorHistory`
    *   **Format:** JSON string representing an array of calculation objects. Each object contains details like `id`, `timestamp`, `type` (`selling-price` or `payout`), `input` value, `feePercentage`, `discountPercentage` (the offer %), calculated `fee`, `discountAmount`, `result`, `finalPrice`, and `currencySymbol`. See `src/types/history.ts` for detailed field descriptions.

```json
[
  {
    "id": "unique_id_1",
    "timestamp": 1678886400000,
    "type": "selling-price", // Desired Payout -> Final Price
    "input": 700, // Desired Payout (X)
    "feePercentage": 0.30,
    "discountPercentage": 0.10, // 10% Offer
    "fee": 300, // Fee = (700 / (1 - 0.30)) * 0.30
    "discountAmount": 100, // Discount = (700 / (1 - 0.30)) * 0.10
    "result": 1000, // Selling Price Before Discount = 700 / (1 - 0.30)
    "finalPrice": 900, // Customer Pays = 1000 * (1 - 0.10)
    "currencySymbol": "Rs."
  },
  {
    "id": "unique_id_2",
    "timestamp": 1678896400000,
    "type": "payout", // SP (Before Disc) -> Payout
    "input": 1000, // Selling Price Before Discount
    "feePercentage": 0.30,
    "discountPercentage": 0.10, // 10% Offer was applied
    "fee": 270, // Fee = (1000 * (1 - 0.10)) * 0.30 = 900 * 0.30
    "discountAmount": 100, // Discount = 1000 * 0.10
    "result": 630, // Payout = (1000 * (1 - 0.10)) - 270 = 900 - 270
    "finalPrice": 900, // Customer Pays = 1000 * (1 - 0.10)
    "currencySymbol": "Rs."
  }
]
```

## Available Scripts

*   `npm run dev`: Starts the Next.js development server with Turbopack.
*   `npm run build`: Builds the application for production.
*   `npm run start`: Starts the production server (requires running `npm run build` first).
*   `npm run lint`: Runs the Next.js linter.
*   `npm run typecheck`: Checks TypeScript types.

    