
<!-- This application was initially generated by AI and may require further refinement. -->

# Uber Eats Fee Calculator - Built with Gemini AI (via Firebase Studio)

This is a simple Next.js application designed to calculate Uber Eats prices, factoring in a configurable fee percentage and an optional discount percentage. It allows users to calculate the final selling price needed based on a desired item price or determine the original item price by subtracting the fee and considering the discount from a given selling price.

## Features

*   **Calculate Selling Price (Based on Desired Price + Fee + Optional Discount):** Enter the **Desired Item Price** you want to receive *before* the fee is added and before any discount. The calculator determines the required **Selling Price (Before Discount)** using `Selling Price = Desired Price / (1 - Fee Percentage)`. Optionally, enter a **Discount Percentage**, and it calculates the **Final Price (Customer Pays)** as `Selling Price * (1 - Discount Percentage)`. It also shows the calculated **Uber Fee** (`Selling Price * Fee Percentage`) and the **Discount Amount**.
*   **Calculate Item Price (Selling Price - Fee - Optional Discount):** Enter a **Selling Price (Before Discount)** (the price listed on the platform *before* any discount). Optionally, enter the **Discount Percentage** (0-100) offered to the customer. The calculator first calculates the **Uber Fee** (`Selling Price (Before Discount) * Fee Percentage`) and the **Discount Given** (`Selling Price (Before Discount) * Discount Percentage`). Then, it calculates the **Item Price (Seller Receives)** (`Selling Price (Before Discount) * (1 - Fee Percentage)`) and the **Final Price (Customer Pays)** (`Selling Price (Before Discount) * (1 - Discount Percentage)`).
*   **Configurable Settings:**
    *   Set the fee percentage (defaults to 30%).
    *   Set the currency symbol (defaults to 'Rs.').
*   **Calculation History:** View a history of your past calculations in an expandable section.
*   **Client-Side Storage:** Settings and history are stored locally in your browser's `localStorage`.
*   **Responsive Design:** Adapts to different screen sizes.

## Live Preview

You can try a live preview of the application here: [Live Preview](https://9000-idx-studio-1746447866480.cluster-fdkw7vjj7bgguspe3fbbc25tra.cloudworkstations.dev)

*(Note: This link might be temporary depending on the hosting environment.)*

## Architecture

This application is built entirely on the **client-side** using Next.js (App Router) and React.

*   **Frontend Framework:** [Next.js](https://nextjs.org/) (with TypeScript)
*   **UI Components:** [shadcn/ui](https://ui.shadcn.com/) built on Radix UI and Tailwind CSS.
*   **Styling:** [Tailwind CSS](https://tailwindcss.com/)
*   **State Management:** React Hooks (`useState`, `useEffect`, `useMemo`, `useCallback`).
*   **Data Storage:** Browser `localStorage` is used to persist user settings and calculation history. **There is no backend server.**

## Getting Started

### Prerequisites

*   [Node.js](https://nodejs.org/) (version 20 or later recommended)
*   [npm](https://www.npmjs.com/) (usually comes with Node.js)

### Installation

1.  Clone the repository:
    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```
2.  Install dependencies:
    ```bash
    npm install
    ```

### Running the Development Server

To run the app in development mode:

```bash
npm run dev
```

This will start the development server, usually on `http://localhost:9002`. The app will automatically reload if you make changes to the code.

## Usage

1.  **Open the App:** Navigate to the running application in your browser.
2.  **Calculator:**
    *   **Item Price + Fee Tab:**
        *   Enter the **Desired Item Price** (the amount you want to receive *before* fees and discounts).
        *   (Optional) Enter the **Discount Percentage** (0-100) offered to the customer.
        *   The calculator shows:
            *   **Selling Price (Before Discount):** The price needed before discount (`Desired Price / (1 - Fee Percentage)`).
            *   **Uber Fee:** Calculated on the Selling Price Before Discount.
            *   **Discount Amount:** The value of the discount applied.
            *   **Final Price (Customer Pays):** The price after the discount.
        *   *Example (No Discount):* Desired Price `Rs. 700`, Fee `30%`. Result: Selling Price `Rs. 1000`, Fee `Rs. 300`, Final Price `Rs. 1000`.
        *   *Example (With Discount):* Desired Price `Rs. 700`, Fee `30%`, Discount `10%`. Result: Selling Price `Rs. 1000`, Fee `Rs. 300`, Discount `Rs. 100`, Final Price `Rs. 900`.
    *   **Selling Price - Fee Tab:**
        *   Enter the **Selling Price (Before Discount)** (the price listed *before* any discount).
        *   (Optional) Enter the **Discount Percentage** (0-100) offered to the customer from this price.
        *   The calculator shows:
            *   **Uber Fee:** Calculated based on the Selling Price Before Discount.
            *   **Discount Given:** The value of the discount applied.
            *   **Item Price (Seller Receives):** The amount the seller gets after the fee is deducted (`Selling Price Before Discount * (1 - Fee Percentage)`).
            *   **Final Price (Customer Pays):** The price after the discount (`Selling Price Before Discount * (1 - Discount Percentage)`).
        *   *Example (No Discount):* Selling Price Before Discount `Rs. 1000`, Fee `30%`. Result: Fee `Rs. 300`, Seller Receives `Rs. 700`, Customer Pays `Rs. 1000`.
        *   *Example (With Discount):* Selling Price Before Discount `Rs. 1000`, Fee `30%`, Discount `10%`. Result: Fee `Rs. 300`, Discount `Rs. 100`, Seller Receives `Rs. 700`, Customer Pays `Rs. 900`.
3.  **Settings:**
    *   Click the gear icon (⚙️) in the top-right corner to open the Settings modal.
    *   Adjust the "Uber Fee Percentage" and "Currency Symbol".
    *   Click "Save Changes". Settings are saved in `localStorage`.
4.  **History:**
    *   Expand the "View Calculation History" accordion below the calculator.
    *   Your recent calculations will be displayed in a table, including discount details.
    *   Click the "Clear" button within the history section to remove all saved history entries from `localStorage`.

## LocalStorage Details

The application uses the browser's `localStorage` to store data persistently on your machine.

*   **Settings Key:** `uberFeeCalculatorSettings`
    *   **Format:** JSON string representing an object like `{"feePercentage": 0.3, "currencySymbol": "Rs."}`.
*   **History Key:** `uberFeeCalculatorHistory`
    *   **Format:** JSON string representing an array of calculation objects. Each object contains details like `id`, `timestamp`, `type` (`with-fee` or `without-fee`), `input` value, `feePercentage`, `discountPercentage`, calculated `fee`, `discountAmount`, `result`, `finalPrice`, and `currencySymbol`. See `src/types/history.ts` for detailed field descriptions.

```json
[
  {
    "id": "unique_id_1",
    "timestamp": 1678886400000,
    "type": "with-fee", // Desired Price -> Final Price
    "input": 700, // Desired Item Price (X)
    "feePercentage": 0.30,
    "discountPercentage": 0.10, // 10% Discount
    "fee": 300, // Fee = (700 / (1 - 0.30)) * 0.30
    "discountAmount": 100, // Discount = (700 / (1 - 0.30)) * 0.10
    "result": 1000, // Selling Price Before Discount = 700 / (1 - 0.30)
    "finalPrice": 900, // Customer Pays = 1000 * (1 - 0.10)
    "currencySymbol": "Rs."
  },
  {
    "id": "unique_id_2",
    "timestamp": 1678896400000,
    "type": "without-fee", // SP (Before Disc) -> Seller Receives
    "input": 1000, // Selling Price Before Discount
    "feePercentage": 0.30,
    "discountPercentage": 0.10, // 10% Discount was applied
    "fee": 300, // Fee = 1000 * 0.30
    "discountAmount": 100, // Discount = 1000 * 0.10
    "result": 700, // Seller Receives = 1000 * (1 - 0.30)
    "finalPrice": 900, // Customer Pays = 1000 * (1 - 0.10)
    "currencySymbol": "Rs."
  }
]
```

## Available Scripts

*   `npm run dev`: Starts the Next.js development server with Turbopack.
*   `npm run build`: Builds the application for production.
*   `npm run start`: Starts the production server (requires running `npm run build` first).
*   `npm run lint`: Runs the Next.js linter.
*   `npm run typecheck`: Checks TypeScript types.
```
